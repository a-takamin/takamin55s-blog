---
title: background job の基本を理解する
description: background job の基本的な概念と結果の受け取り方に関するパターン
summary: background job の基本的な概念と結果の受け取り方に関するパターンを読みました。ただしエラーハンドリングは載ってこなかったので今後に期待です。
slug: background-job-basics
tags:
  - ソフトウェア設計
  - Tech
date: "2026-02-05"
---

background job について調べました。

background job とはつまるところ非同期処理です。  

## background job のトリガー方法
トリガー方法は 2 種類あります。

- Event-driven: 何らかのイベントを契機に起動する
- Schedule-driven: 定期的に起動する

このあたりは知っていますね。前者は SQS などのキューイングサービス、後者は cron job で使ったことがあります。

## 結果の受け取りについて
非同期は `fire and forget` と例えられて、実行された後は結果を受け取らないものですが、業務アプリケーションで結果を受け取らない例は少ないはず。

結果の受け取り方にはいくつかパターンがあります。

### 1. DB に書き込ませる
background job が自身のステータスを DB に書き込みます。

そしてメイン job が DB 必要なタイミングで DB にアクセスしてステータスを確認します。  
リアルタイム性が欲しければポーリングすることになりますね。

シンプルですが、ポーリングの場合は無駄な通信が発生しますし、大量の background job が走る場合には使えなさそうです。また DB が必要です。  

実行時のステータスや完了の通知をあまり気にしなくてよい場合はちょうどいいかもしれない。

### 2. メッセージキューに書き込ませる
background job に必要な情報をメッセージキューに書き込ませます。  
そしてそのキューを購読している何かが次の処理を行います。

1 の弱点を克服していますが、こちらはメッセージキューが追加で必要になります。  
メッセージキューを持つということは設計も必要になり、例えばエラーまたは完了時のみキューイングするとして、ネットワーク障害などでキューイング自体ができなかった場合はどうするか、などの設計も必要です。

### 3. コールバック URL を叩かせる
background job にコールバック URL を渡しておき、完了したらその URL を叩かせます。  
完了を即座に報告したい場合は良いかもです。

こちらも完了しなかった場合にどうするか、といった設計が必要そうですね。。

## 終わりに
今回学んだ章では具体的なエラーハンドリングパターンは出てこなかったので、今後に期待。
