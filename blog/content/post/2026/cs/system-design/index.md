---
title: ソフトウェア設計時に考慮する要素
description: ソフトウェアを設計する際に考慮するべき基本的な要素について書きました。
summary: ソフトウェア設計を行う際に考慮するべき基本的な要素について学びました。
slug: software-design-elements
tags:
  - ソフトウェア設計
  - Tech
date: "2026-02-02"
---

ソフトウェア設計を行うにあたって、やっぱり基本的なパターンや考え方を押さえておきたいなと思いました。
結局は何ごとも基礎・基本がないと応用が利かないですから。

`roadmap.sh` を使って学んでみました。

https://roadmap.sh/system-design

## Performance vs Scalability | パフォーマンスvsスケーラビリティ
このあたりを読みました。

- https://blog.professorbeekums.com/performance-vs-scalability/
- https://github.com/donnemartin/system-design-primer?tab=readme-ov-file#performance-vs-scalability

スケーラビリティとはユーザーやデータ、トラフィックの増加に対してシステムが処理できる能力のことです。  
そしてパフォーマンスはそのまま速度のことなのですが…少し注意点が必要です。

レジに例えた場合、以下を思い浮かべるかもしれません。

- パフォーマンス: ▲ 1人のレジ処理にかかる時間
- スケーラビリティ: ✖ レジの数

しかしこれらは正確ではありません。

パフォーマンスを「理論上1人のお客さんをレジ処理できる時間（=例：最速で30秒）」という認識だと NG です。  
確かに「レジ処理時間」なのですが、「お客さんが5人になるとレジのパフォーマンスが悪くなる」というように、お客さんの数や商品の数も考慮にした言葉となっています。

そしてパフォーマンスの変動が小さい、つまりお客さんの数や商品の数が増えても平均レジ処理時間がほぼ変わらないレジであれば、それはスケーラビリティが高いレジということになります。

問題に注目することでより理解が深まるかもしれません。

- パフォーマンスに問題がある場合は、システムは1人に対して遅いです。
- スケーラビリティに問題がある場合は、システムは1人に対しては速いですが、負荷がかかると遅くなります。

## Latency vs Throughput | レイテンシvsスループット
このあたりを読みました。

- https://cs.fyi/guide/latency-vs-throughput
- https://community.cadence.com/cadence_blogs_8/b/fv/posts/understanding-latency-vs-throughput
- https://github.com/donnemartin/system-design-primer?tab=readme-ov-file#latency-vs-throughput

レイテンシはレイテンシーとは、何らかのアクションを実行したり、結果を生成したりするのに必要な時間のことです。ただし、ネットワークの文脈ではネットワーク遅延時間として使われることも多いので注意です。

- レイテンシ: 何らかのアクションを実行したり、結果を生成したりするのに必要な時間。つまり処理時間
- 主にネットワークに焦点を当てたレイテンシ: データが送信元から送信先（ユーザーPCからサーバー）に到達するまでにかかる遅延時間

スループットとは、何らかの単位時間あたりのアクションや結果の数のことです。

ここで大事なのは、「スループットは単位時間がセット」「スループットはレイテンシと組み合わせて使うケースもある」「レイテンシーからスループットは直接導き出せない」だと思っています。

### スループットは単位時間がセット
- 1秒あたり○○ リクエスト
- 1秒あたり○○ GB

というように、スループットには必ず単位時間がセットです。

### スループットはレイテンシと組み合わせて使うケースもある
スループット自体はレイテンシとは独立した概念ですが、システムを評価するためにレイテンシと組み合わせて使うケースがあります。

例えば 1 秒あたり 500 リクエストを捌けるとしても、その時のレイテンシが許容値の 3 秒を超えて 5 秒まで悪化してしまう場合は、500 req / s のスループット値を使えるかどうかは文脈によります。

マネージャーは、あくまでレイテンシの条件内でのスループットを求めているかもしれませんし、システムが対応できる限界スループットを求めているかもしれません。

### レイテンシーからスループットは直接導き出せない
つまり、以下のような状況は起こるということです。

- レイテンシ: 10 秒/リクエスト
- スループット: 100 リクエスト/1分

1リクエストに10秒かかるから 1 分でスループットは 6 リクエストしか出ない…と考えがちですが、並列処理の能力があれば 1 分で 100 リクエストを処理することも可能だからです。

## Availability vs Consistency | 可用性vs一貫性
ここに分断体制という言葉も加わって CAP 定理に繋がります。

### Availability | 可用性
可用性とは分散システムにおいて 1 つ以上のノードがダウンしていたとしても、クライアントは応答を受け取れることです。  
つまり、分散システムにおいて動作しているノードは必ず有効な応答を返します。

### Consistency | 一貫性
一貫性とは分散システムにおいてどのノードに接続しても、すべてのクライアントは同時に同じデータを参照できることです。  
つまり一貫性を保つには書き込みを「成功」させるためにそのデータがすべてのノードに反映させる必要があります。

### Partition Tolerance | 分断耐性
分断体制とは分散システム内でノード間の通信が失われた場合でも、システム全体が動作し続ける能力のことです。

### CAP 定理
CAP 定理とは、以上の 3 つの特性はすべて同時に満たすことはできず、トレードオフの関係であるというものです。

AP システムの場合は、システムはネットワークの分断が発生しても動作を続ける必要があります。分断中のリクエストに対して処理を行うので、同期が取れず一貫性が犠牲になります。  

CP システムの場合は、システムはネットワークの分断が発生しても一貫性を保証する必要があります。分断中のリクエストに対して一貫性を保証するためには処理を行えないので、可用性が犠牲になります。

## 終わりに
CAP 定理という定理として存在していたのは知らなかったので勉強になりました。  
